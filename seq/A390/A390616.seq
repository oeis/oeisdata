%I A390616 #31 Jan 11 2026 23:13:28
%S A390616 0,1,2,3,4,6,8,9,11,13,14,16,18,19,22,25,26,29,32,33,36,39,40,43,46,
%T A390616 47,50,53,54,57,60,61,64,67,68,71,74,75,78,81,82,86,90,91,95,99,100,
%U A390616 104,108,109,113,117,118,122,126,127,131,135,136,140
%N A390616 Sum of depths of leaves in a complete ternary tree with n nodes.
%C A390616 The values are invariant for left-complete and right-complete ternary trees.
%F A390616 a(n) = (h-1)*L + (n - M), where h = floor(log_3(2*n - 1)), M = (3^h - 1)/2, L = n - floor((n+1)/3).
%e A390616 For n=5 the tree is as follows and the leaves are 3, 4, 5 with depths a(5) = 1 + 1 + 2 = 4.
%e A390616        1
%e A390616      / | \
%e A390616     2  3  4
%e A390616    /
%e A390616   5
%e A390616 For n = 14, there are 9 leaves in total: 8 leaves at depth 2 and 1 leaf at depth 3, so a(14) = 2*8 + 3 = 19.
%o A390616 (Python)
%o A390616 def a(n):
%o A390616     if n <= 1: return 0
%o A390616     h = 0
%o A390616     while (3**(h+1) - 1) // 2 < n:
%o A390616         h += 1
%o A390616     M = (3**h - 1) // 2
%o A390616     L = n - (n + 1) // 3
%o A390616     return (h-1)*L + (n - M)
%Y A390616 Cf. A003462 (nodes in perfect ternary tree), A213511 (total depths all nodes).
%Y A390616 Cf. A392221 (binary tree).
%K A390616 nonn,easy,new
%O A390616 1,3
%A A390616 _Kaloian Ivanov_, Jan 04 2026
