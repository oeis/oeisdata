%I A390768 #44 Nov 23 2025 03:52:55
%S A390768 0,-1,1,-2,-3,-1,1,-3,-1,-1,1,-2,-1,-1,1,-4,-1,-1,0,-2,-5,-1,1,-3,0,
%T A390768 -1,1,-2,-1,-1,1,-5,-1,-1,0,-2,-3,-1,0,-3,-1,-1,1,-2,-1,-1,1,-4,0,-1,
%U A390768 1,-2,-3,-1,1,-3,0,-1,1,-2,-1,-1,1,-6,-1,-1,0,-2,-3,-1,0,-3,-1,-1,0,-2
%N A390768 Triangle (read by rows) lists relative distances in 2^m-range-steps after some first Collatz iterations.
%C A390768 Some first Collatz iterations here are:
%C A390768 If k_start is even, divide this k by 2 as often as possible to get the number k_end.
%C A390768 If k_start is odd, make one 3*k+1 iteration and then divide k by 2 as often as possible to get the number k_end.
%C A390768 Finally we calculate: ceiling(log_2(k_end)) - ceiling(log_2(k_start)) and this gives the relative distance.
%C A390768 In words: How many 2^m ranges is k_start from k_end away.
%C A390768 E.g., -1 means k_end is in the 2^m range one to the left of the k_start range.
%C A390768 So every row in the triangle represents one 2^m range (k_start from 2(m-1)+1 up to 2^m).
%C A390768 Two surprising details are that the sums of each row are the exact negated terms of A083595 and
%C A390768 .
%C A390768               -Sum of terms in row m
%C A390768 the ratio  ---------------------------- tends to be 7/6 (= A177057)
%C A390768              Number of terms in row m
%C A390768 .
%C A390768 (higher m = better approximation).
%C A390768 The a(n) with even n are the negated terms of the ruler function A001511.
%C A390768 The row sums only of the a(n) with odd n are the negated terms of A097073.
%H A390768 Karl-Heinz Hofmann, <a href="/A390768/b390768.txt">Table of n, a(n) for n = 1..16384</a>
%F A390768 a(2*n) = -1 * A001511(n).
%e A390768 Triangle begins:
%e A390768 --------------------------------------------------------------------------------
%e A390768   m  | Terms                                                     | Sums per row
%e A390768  row | (negative terms to the left, positive to the right)       | (cf. A083595)
%e A390768 --------------------------------------------------------------------------------
%e A390768   0  |  0                                                        |    0
%e A390768   1  | -1                                                        |   -1
%e A390768   2  |  1, -2                                                    |   -1
%e A390768   3  | -3, -1, 1, -3                                             |   -6
%e A390768   4  | -1, -1, 1, -2, -1, -1, 1, -4                              |   -8
%e A390768   5  | -1, -1, 0, -2, -5, -1, 1, -3, 0, -1, 1, -2, -1, -1, 1, -5 |  -20
%e A390768   6  | -1, -1, 0, -2, -3, .................. , -2, -1, -1, 1, -6 |  -36
%e A390768   7  | -1, -1, 0, -2, -3, .................. , -2, -1, -1, 1, -7 |  -76
%e A390768   7  | -1, -1, 0, -2, -3, .................. , -2, -1, -1, 1, -8 | -148
%e A390768   :  |  :                                                        |    :
%e A390768 --------------------------------------------------------------------------------
%t A390768 row[n_] := (Ceiling[Log2[NestWhile[#/2 &, If[OddQ[#], 3 # + 1, #], EvenQ]]] - n) & /@ Range[Floor[2^(n-1)+1], 2^n]; Table[row[n], {n, 0, 7}] // Flatten (* _Amiram Eldar_, Nov 18 2025 *)
%o A390768 (Python)
%o A390768 from math import ceil, log
%o A390768 max_rows, A390768, row = 14, [], []
%o A390768 for m in range(0,max_rows+1): row.append([])
%o A390768 for k_start in range(1, 2**max_rows+1):
%o A390768     m = ceil(log(k_start,2))
%o A390768     if k_start % 2 == 1: k_end = 3*k_start+1
%o A390768     else: k_end = k_start
%o A390768     while k_end % 2 == 0: k_end //= 2
%o A390768     row[m].append(ceil(log(k_end,2)) - m)
%o A390768     A390768.append(ceil(log(k_end,2)) - m)
%o A390768 print(A390768[:100])
%o A390768 #for m in range(8): print(m, row[m])  # turn on to show some first rows
%o A390768 (PARI) row(n) = vector(2^n-2^n\2, i, my(k = 2^n\2 + i); k = if(k%2, 3*k+1, k); k >>= valuation(k, 2); if(k == 1, 0, exponent(k-1) + 1) - n); \\ _Amiram Eldar_, Nov 20 2025
%Y A390768 Cf. A083595, A177057, A001511, A097073.
%Y A390768 A390595 gives the positions of zeros.
%K A390768 tabf,sign,easy,new
%O A390768 1,4
%A A390768 _Karl-Heinz Hofmann_, Nov 18 2025
