%I A387188 #44 Nov 15 2025 12:11:58
%S A387188 1,2,3,2,4,5,3,5,6,2,4,5,4,7,8,5,8,9,3,5,6,5,8,9,6,9,10,2,4,5,4,7,8,5,
%T A387188 8,9,4,7,8,7,11,12,8,12,13,5,8,9,8,12,13,9,13,14,3,5,6,5,8,9,6,9,10,5,
%U A387188 8,9,8,12,13,9,13,14,6,9,10,9,13,14,10,14
%N A387188 a(n) = s*(s+1)/2 + t + 1 where s = A160384(n) and t = A081603(n) are the number of nonzero and number of 2 digits of n in ternary.
%C A387188 Take D(n) = {multiset of the nonzero ternary digits of n}, and order those sets by size then by number of 2's, and then a(n) is the index of D(n) among those sets starting from D(0) (the empty set) as index 1.
%C A387188 Such a multiset can be formed by sorting nonzero digits as a "key" value A038574(n) and considering those in numerical order, so that a(n) is the index of A038574(n) among distinct values which occur there: those being A023745.
%C A387188 This is the restricted growth sequence transform of that key A038574, so can be defined as the lexicographically earliest infinite sequence where a(i) = a(j) if and only if A038574(i) = A038574(j).
%C A387188 The "triangular" ordering of the multisets allows a direct calculation from the digits of n.
%C A387188 Any additional 0 digits in n have no effect so for instance a(3*n) = a(n).
%C A387188 Any re-ordering of digits in n has no effect, so that for instance arranging terms in a multi-dimensional array of side 3^k is symmetric in that it's unchanged by permuting coordinates.
%H A387188 Yusum Selimov and Antti Karttunen, <a href="/A387188/b387188.txt">Table of n, a(n) for n = 0..19682</a>
%F A387188 a(n) = A000217(A160384(n)) + A081603(n) + 1.
%e A387188 n = 886 = ternary 1012211 has s=6 and t=2 for a(886) = 24; the multiset is D(n) = {1,1,1,1,2,2} and A038574(n) = 111122.
%e A387188 Terms for n=0..8 arranged as a 3 X 3 array show symmetry in transposing X,Y (swap the two least significant ternary digits in n),
%e A387188   1   2   3
%e A387188   2   4   5
%e A387188   3   5   6
%t A387188 A387188[n_] := PolygonalNumber[Count[#, _?Positive]] + Count[#, 2] + 1 & [IntegerDigits[n, 3]];
%t A387188 Array[A387188, 100, 0] (* _Paolo Xausa_, Nov 14 2025 *)
%o A387188 (Python)
%o A387188 def a(n):
%o A387188     s=0; t=0
%o A387188     while n:
%o A387188         n,r=divmod(n,3)
%o A387188         s += (r>=1)
%o A387188         t += (r==2)
%o A387188     return s*(s+1)//2 + t + 1
%o A387188 (PARI) a(n) = my(v=digits(n,3), s=hammingweight(v), t=vecsum(v)-s); s*(s+1)/2 + t + 1; \\ _Kevin Ryde_, Oct 21 2025
%Y A387188 Cf. A000217, A023745, A038574, A081603, A160384.
%K A387188 nonn,base,easy,look,new
%O A387188 0,2
%A A387188 _Yunus Selimov_, Aug 21 2025
