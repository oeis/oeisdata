%I A391868 #24 Jan 23 2026 17:39:26
%S A391868 1,2,3,5,10,30,260,27055,359053260,64449908835943580,
%T A391868 2076895351339769524927520206130260,
%U A391868 2156747150208372213435450937462084443815303022682314584506286121480
%N A391868 Start with the list of positive integers 1,2,3,... . After each integer k, insert k empty positions. Fill these positions, from left to right, with the positive integers in order. Repeat this spacing-and-filling process indefinitely. The sequence consists of the positions of the last occurrence of 1 after each step.
%C A391868 See the Example for a more complete description of the spacing-and-filling process.
%C A391868 In computing the sequence, it is enough to keep track of the list of numbers up to and including the last 1. The process starts as follows (cf. first Python program):
%C A391868   [1],
%C A391868   [1,1],
%C A391868   [1,1,1],
%C A391868   [1,1,1,2,1],
%C A391868   [1,1,1,2,1,3,2,4,5,1],
%C A391868   [1,1,1,2,1,3,2,4,5,1,6,3,7,8,9,2,10,11,4,12,13,14,15,5,16,17,18,19,20,1],
%C A391868   ...
%C A391868 a(n) is the length of the n-th list.
%C A391868 Note that for n >= 2, a(n+1) = a(n) + S(n) - 1, where S(n) is the sum of the n-th list.
%C A391868 Note that for n >= 2, S(n+1) = S(n) + T(a(n+1)-a(n)) = S(n) + T(S(n)-1), where T(k) is the k-th triangular number, A000217(k).
%C A391868 The sequence for S(n) is 1,2,3,6,21,231,26796,35902620,... or 1 followed by A007501.
%C A391868 a(16) has 1057 digits.
%H A391868 Michael S. Branicky, <a href="/A391868/b391868.txt">Table of n, a(n) for n = 1..15</a>
%F A391868 a(n) = a(n-1) + S(n-1) - 1 for n >= 3, where S(n) = S(n-1) + A000217(S(n-1)-1) and a(1) = S(1) = 1, a(2) = S(2) = 2.
%F A391868 a(n) = a(n-1) + A007501(n-3) - 1 for n >= 3, with a(1) = 1, a(2) = 2.
%F A391868 a(n) = a(n-1) + A006893(n-2) for n >= 3, with a(1) = 1, a(2) = 2.
%e A391868 We start with 1,2,3,4,5,6,... . Note the only 1 is at position 1, so a(1) = 1.
%e A391868 Then, after each term k we first put k spaces and then subsequently fill these spaces with the positive integers in order:
%e A391868   1,_,2,_,_,3,_,_,_,4,_,_,_, _,5, _, _, _, _, _,6,...
%e A391868   1,1,2,2,3,3,4,5,6,4,7,8,9,10,5,11,12,13,14,15,6,...
%e A391868 We see the last 1 at position 2, so a(2) = 2. In the next step, we repeat the spacing-and-filling process:
%e A391868   1,_,1,_,2,_,_,2,_,_,3,_,_,_,3, _, _, _,4, _, _, _, _,5, _,...
%e A391868   1,1,1,2,2,3,4,2,5,6,3,7,8,9,3,10,11,12,4,13,14,15,16,5,17,...
%e A391868 We see the last 1 at position 3, so a(3) = 3.
%e A391868   1,_,1,_,1,_,2,_,_,2,_,_,3,_,_, _,4, _, _, _, _,2, _, _,5,...
%e A391868   1,1,1,2,1,3,2,4,5,2,6,7,3,8,9,10,4,11,12,13,14,2,15,16,5,...
%e A391868 We see the last 1 at position 5, so a(4) = 5.
%e A391868 We continue this process to obtain further terms.
%o A391868 (Python) # constructive version
%o A391868 from itertools import islice
%o A391868 def space_and_fill(L):
%o A391868     out, i = [], 1
%o A391868     for t in L:
%o A391868         out.extend([t]+list(range(i, i+t)))
%o A391868         i += t
%o A391868     return out
%o A391868 def agen():
%o A391868     L, s = [1], 1
%o A391868     yield 1
%o A391868     while True:
%o A391868         last1 = len(L) - L[::-1].index(1)
%o A391868         L = L[:last1]
%o A391868         yield last1 - 1 + sum(L) # next last1
%o A391868         L = space_and_fill(L)
%o A391868 print(list(islice(agen(), 9)))
%o A391868 (Python) # version based on first formula
%o A391868 def T(n): return n*(n+1)//2
%o A391868 def S(n):
%o A391868     if n < 3: return n
%o A391868     return (Sp:=S(n-1)) + T(Sp-1)
%o A391868 def a(n):
%o A391868     if n < 3: return n
%o A391868     return a(n-1) + S(n-1) - 1
%o A391868 print([a(n) for n in range(1, 13)])
%Y A391868 Cf. A000217, A006893, A007501.
%K A391868 nonn,new
%O A391868 1,2
%A A391868 _Ali Sada_ and _Michael S. Branicky_, Jan 18 2026
