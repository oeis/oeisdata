%I A391398 #24 Dec 10 2025 18:17:02
%S A391398 1,1,3,6,10,21,43,81,161,325,637,1260,2520,4999,9917,19770,39354,
%T A391398 78275,155969,310818,619174,1234199,2460905,4906597,9785125,19518887,
%U A391398 38937907,77686076,155017552,309355889,617411371,1232356841,2459998905,4910949493,9804596413
%N A391398 Number of compositions of n where the median of parts equals 1.
%C A391398 For even-length compositions, the median is defined as the lower-middle element of the sorted parts.
%C A391398 Equivalently, compositions where at least half the parts equal the smallest part, all parts are multiples of the smallest part, and the smallest part is 1.
%H A391398 Alois P. Heinz, <a href="/A391398/b391398.txt">Table of n, a(n) for n = 1..3323</a>
%F A391398 a(n) = 1 + Sum_{k=2..n-1} Sum_{j=1..min(floor(k/2), n-k)} binomial(k,j) * binomial(n-k-1, j-1).
%F A391398 a(n) = Sum_{d|n} mu(d) * A388070(n/d), where mu is the Möbius function (Möbius transform of A388070).
%e A391398 a(5) = 10 because the compositions of 5 with gcd = median = 1 are: [1,1,1,1,1], [1,1,1,2], [1,1,2,1], [1,2,1,1], [2,1,1,1], [1,1,3], [1,3,1], [3,1,1], [1,4], [4,1]. The composition [5] is excluded because gcd = median = 5, not 1.
%p A391398 b:= proc(n, c) option remember; `if`(-c>n, 0, `if`(n=0, 1,
%p A391398       add(b(n-j, c+`if`(j=1, 1, -1)), j=1..n)))
%p A391398     end:
%p A391398 a:= n-> b(n, 0):
%p A391398 seq(a(n), n=1..35);  # _Alois P. Heinz_, Dec 09 2025
%p A391398 # second Maple program:
%p A391398 a:= proc(n) option remember; `if`(n<5, [1$3, 3, 6][n+1],
%p A391398       (8*(n-5)*(2*n-5)*a(n-5)-4*(6*n^2-37*n+49)*a(n-4)+2*(6*n^2-33*n+31)*a(n-3)
%p A391398        -(10*n^2-55*n+53)*a(n-2)+(8*n^2-36*n+23)*a(n-1))/(n*(2*n-7)))
%p A391398     end:
%p A391398 seq(a(n), n=1..35);  # _Alois P. Heinz_, Dec 10 2025
%o A391398 (Python)
%o A391398 from math import comb
%o A391398 def a(n):
%o A391398     if n == 0: return 0
%o A391398     total = 1
%o A391398     for k in range(2, n):
%o A391398         for j in range(1, min(k // 2, n - k) + 1):
%o A391398             total += comb(k, j) * comb(n - k - 1, j - 1)
%o A391398     return total
%o A391398 print([a(n) for n in range(1, 21)])
%Y A391398 Cf. A388070 (compositions where gcd = median), A011782 (total number of compositions).
%Y A391398 Cf. A008683.
%K A391398 nonn,changed
%O A391398 1,3
%A A391398 _Austen M. Fletcher_, Dec 08 2025
