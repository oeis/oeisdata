%I A393166 #16 Feb 09 2026 16:29:00
%S A393166 0,0,0,1,0,3,3,9,0,6,12,6,30,30,30,72,0,10,30,30,10,70,120,70,120,120,
%T A393166 70,270,270,270,270,600,0,15,60,90,60,15,135,330,330,135,330,540,330,
%U A393166 330,330,135,720,1170,720,1170,1170,720,1170,1170,1170,720,2520,2520,2520,2520,2520,5400
%N A393166 Irregular triangular array read by rows. T(n,k) is the total number of inversions over the permutations of [n] whose descent set is contained in S for each subset S of {1,2,...,n-1} where the subsets are ordered first by size and then lexicographically (Cf. A082185).
%D A393166 Richard Stanley, Enumerative Combinatorics, Volume 1, Second Edition, Example 2.2.5.
%e A393166 Triangle begins:
%e A393166   0;
%e A393166   0;
%e A393166   0,  1;
%e A393166   0,  3,  3,  9;
%e A393166   0,  6, 12,  6, 30, 30, 30,  72;
%e A393166   0, 10, 30, 30, 10, 70, 120, 70, 120, 120, 70, 270, 270, 270, 270, 600; ...
%e A393166 T(4,7) = 30. S = {2,3}. There are A392945(4,7) = 12 permutations of [4] whose descent set is contained in S: {1, 2, 3, 4}, {1, 2, 4, 3}, {1, 3, 2, 4}, {1, 3, 4, 2}, {1, 4, 2, 3}, {1, 4, 3, 2}, {2, 3, 1, 4}, {2, 3, 4, 1}, {2, 4, 1, 3}, {2, 4, 3, 1}, {3, 4, 1, 2}, {3, 4, 2, 1}. There are 0, 1, 1, 2, 2, 3, 2, 3, 3, 4, 4, 5 inversions respectively in these permutations for a total of 30.
%t A393166 steplengths[n_] := Map[Differences,Map[Append[#, n] &, Map[Prepend[#, 0] &, Subsets[Range[n - 1]]]]];f[list_] := Apply[Times, Map[QFactorial[#, q] &, list]];numberofinversions[n_, steplengths_] :=Limit[D[QFactorial[n, q]/f[steplengths] // FunctionExpand, q],q -> 1]; Table[Map[numberofinversions[n, #] &, steplengths[n]], {n, 0, 6}]
%Y A393166 Cf. A001809, A392945, A335845, A001809 (last entry in each row), A000217 (second column), A390552, A240796 (row sums).
%K A393166 nonn,tabf,new
%O A393166 0,6
%A A393166 _Geoffrey Critzer_, Feb 03 2026
