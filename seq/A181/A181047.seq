%I A181047 #16 Jan 07 2026 02:40:22
%S A181047 1,3,9,27,54,180,426,1080,2724,6300,16512,42432,98064,248256,616656,
%T A181047 1509888,3767040,9389376,23549376,58493760,140807232,336314880,
%U A181047 806979456
%N A181047 Number of length-n sequences A over {1,2,3} with the property that all of r(A), r(r(A)), etc. are over {1,2,3}, where r is the sequence obtained by taking the run lengths in A.
%e A181047 For example, the run-lengths in 1333 are 13, then the run-lengths of this is 11, then the run-lengths of this is 2, then the run-lengths of this is 1, so this sequence is counted in a(4).
%o A181047 (Python)
%o A181047 from itertools import groupby, product
%o A181047 def r(w):
%o A181047     return [len(list(g)) for k, g in groupby(w)]
%o A181047 def c(w):
%o A181047     while (rw:=r(w)) != w:
%o A181047         if not set(rw) <= {1, 2, 3}: return False
%o A181047         w = rw
%o A181047     return True
%o A181047 def a(n):
%o A181047     if n == 0: return 1
%o A181047     return 3*sum(1 for w in product((1,2,3), repeat=n-1) if c((1,)+w))
%o A181047 print([a(n) for n in range(14)]) # _Michael S. Branicky_, Jan 06 2026
%K A181047 nonn,hard,more,changed
%O A181047 0,2
%A A181047 _Jeffrey Shallit_, Oct 01 2010
%E A181047 a(0)-a(10) confirmed and a(11)-a(14) added by _John W. Layman_, Oct 07 2010
%E A181047 a(15)-a(16) from _Alois P. Heinz_, Oct 16 2011
%E A181047 a(17)-a(22) from _Michael S. Branicky_, Jan 06 2026
