%I A389813 #15 Oct 21 2025 08:44:20
%S A389813 0,0,0,0,2,9,30,79,190,425,913,1909,3927,7987,16141,32483,65205,
%T A389813 130690,261709,523794,1048021,2096530,4193611,8387840,16776371,
%U A389813 33553502,67107846,134216618,268434250,536869604,1073740412,2147482124,4294965658,8589932834,17179867302
%N A389813 Number of subsets of {1..n} not forming a finite arithmetic progression.
%C A389813 These are subsets of {1..n} without all equal first differences.
%H A389813 Gus Wiseman, <a href="/A325325/a325325.txt">Sequences counting and ranking integer partitions by the differences of their successive parts</a>.
%e A389813 The subset {2,3,4} is a finite arithmetic progression so is not counted under a(4).
%e A389813 The a(6) = 30 subsets are:
%e A389813   {1,2,4}  {1,2,3,5}  {1,2,3,4,6}
%e A389813   {1,2,5}  {1,2,3,6}  {1,2,3,5,6}
%e A389813   {1,2,6}  {1,2,4,5}  {1,2,4,5,6}
%e A389813   {1,3,4}  {1,2,4,6}  {1,3,4,5,6}
%e A389813   {1,3,6}  {1,2,5,6}
%e A389813   {1,4,5}  {1,3,4,5}
%e A389813   {1,4,6}  {1,3,4,6}
%e A389813   {1,5,6}  {1,3,5,6}
%e A389813   {2,3,5}  {1,4,5,6}
%e A389813   {2,3,6}  {2,3,4,6}
%e A389813   {2,4,5}  {2,3,5,6}
%e A389813   {2,5,6}  {2,4,5,6}
%e A389813   {3,4,6}
%e A389813   {3,5,6}
%t A389813 Table[Length[Select[Subsets[Range[n]],!SameQ@@Differences[#]&]],{n,0,15}]
%o A389813 (Python)
%o A389813 from math import isqrt
%o A389813 def A389813(n): return (1<<n)-(((s:=isqrt(n-1))*(s+1))**2>>2)-(n-s**2)*n-1-sum((q:=(n-1)//k)*(2*n-k*(1+q)) for k in range(2, s+1)) if n else 0 # _Chai Wah Wu_, Oct 20 2025
%Y A389813 The complement for partitions is A049988 (ranks A325328), strict A049980.
%Y A389813 The complement for compositions is A175342, ranks A389731.
%Y A389813 For complement for distinct instead of equal differences is A364465.
%Y A389813 The complement is counted by A389737.
%Y A389813 For compositions instead of subsets we have A389741, ranks A389735
%Y A389813 For partitions instead of subsets we have A389811, ranks A389812.
%Y A389813 The version containing maximum is A389921.
%Y A389813 Cf. A000740, A007862, A011782, A051336, A054519, A070939, A325545, A389732.
%K A389813 nonn
%O A389813 0,5
%A A389813 _Gus Wiseman_, Oct 20 2025
%E A389813 More terms from _Chai Wah Wu_, Oct 20 2025
