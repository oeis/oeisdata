%I A345666 #33 Jan 06 2026 10:06:58
%S A345666 12,15,27,110,117,119,123,129,141,143,147,153,159,161,171,183,189,297,
%T A345666 1010,1030,1070,1090,1113,1127,1131,1137,1139,1149,1157,1167,1173,
%U A345666 1179,1191,1197,1199,1211,1227,1233,1239,1241,1251,1257,1263,1269,1271,1281,1293
%N A345666 Composite numbers whose largest prime substring is greater than the record of all previous terms.
%H A345666 Robert Israel, <a href="/A345666/b345666.txt">Table of n, a(n) for n = 1..10000</a>
%e A345666 a(1)=12 is the first composite containing a prime substring. Its largest prime substring is A345667(1)=2. It is the first nonzero composite index of A047814.
%p A345666 R:= 12: count:= 1: p:= 2: mp:= 1:
%p A345666 for x from 13 while count < 100 do
%p A345666   if isprime(x) then next fi;
%p A345666   found:= false;
%p A345666   for m from ilog10(x) to mp by -1 while not found do
%p A345666      for i from 0 to ilog10(x)+1-m do
%p A345666        y:= floor(x/10^i) mod 10^(m+i);
%p A345666        if isprime(y) and y > p then found:= true; p:= y; mp:= m; fi;
%p A345666      od;
%p A345666   od;
%p A345666   if found then R:= R,x; count:= count+1;  fi
%p A345666 od:
%p A345666 R; # _Robert Israel_, Jan 04 2026
%t A345666 lst={};max=m=0;Do[If[!PrimeQ@n,If[IntegerQ[s=Max@Select[FromDigits/@Subsequences@IntegerDigits@n,PrimeQ]],m=s]];If[m>max,max=m;AppendTo[lst,n]],{n,10000}];lst (* _Giorgos Kalogeropoulos_, Jun 25 2021 *)
%o A345666 (Python)
%o A345666 def trojan_composites(limit_maxval=None, limit_terms=None, verbose=True):
%o A345666     from sympy import isprime
%o A345666     num = 1
%o A345666     best = 0
%o A345666     found = []
%o A345666     while (not limit_maxval or num <= limit_maxval) and (not limit_terms or len(found) < limit_terms):
%o A345666         num += 1
%o A345666         if not isprime(num):
%o A345666             string = str(num)
%o A345666             for length in range(len(string), len(str(best)), -1):
%o A345666                 candidate = max(filter(isprime, {int(string[i:i + length - 1]) for i in range(len(string) - length + 2)}), default=0)
%o A345666                 if candidate:
%o A345666                     if candidate > best:
%o A345666                         best = candidate
%o A345666                         found.append(num)
%o A345666                         if verbose:
%o A345666                             print(num, end=', ', flush=True)
%o A345666                 break
%o A345666     if verbose:
%o A345666         print()
%o A345666     return found
%o A345666 trojan_composites(limit_terms=7) #[12, 15, 27, 110, 117, 119, 123]
%Y A345666 Cf. A002808, A047814, A345667 (corresponding prime substrings).
%K A345666 nonn,base,look
%O A345666 1,1
%A A345666 _Eyal Gruss_, Jun 21 2021
